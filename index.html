<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title>map</title>
    </head>

    <body>
        <div id="hecny-ecom-widget" style='width: 760px; height: 500px'></div>
        <script defer>
            //baseUrl: "http://ecom.local",
            const settings = {
                partner: "hly",
                elementId: "hecny-ecom-widget",
                baseUrl: "https://testecom.yolka.io",
            }

            const handlePointChoose = (event) => {
                console.log("ПВЗ", event.target.id);
                console.log("адрес", event.target.dataset.address);
            }
            function initHecnyLoading({partner, elementId, baseUrl}) {
                if (!Object.prototype.hasOwnProperty.call(window, "HecnyYaMap")) {
                    const script = document.createElement("script");
                    script.setAttribute("src", `${baseUrl}/js/widgets/map-widget/map-widget.js`),
                    script.setAttribute("defer", true),
                    script.setAttribute("elementId", elementId),
                    script.setAttribute("partner", partner),
                    script.setAttribute("baseUrl", baseUrl),
                    script.id = "hecnyMapWidget",
                    document.body.insertAdjacentElement("beforeEnd", script)
                    document.addEventListener("hecny-pp", handlePointChoose);
                } else {
                    window.HecnyYaMap.addContainer();
                    window.HecnyYaMap.mountMap();
                }
            }
            initHecnyLoading(settings);
        </script>
    </body>
</html>